<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Wellness Intelligence Lab â€” Shah Hayaat</title>
  <meta name="description" content="Shah Hayaat Digital Wellness Intelligence Lab â€” 18 browser-based assessment modules measuring cognitive performance, respiratory health, stress resilience, motor stability and more. Zero data stored.">
  <meta name="robots" content="index, follow">
  <link rel="icon" href="https://raw.githubusercontent.com/yasirhashmi02-dev/Shahhayaat02/main/logo.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,600;0,700;1,400&family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
/* ============================================================
   SHAH HAYAAT â€” WELLNESS LAB  v1.0
   Part 1: Foundation, Disclaimer, Header, Welcome, Gender
   ============================================================ */

/* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; font-size: 16px; }
img  { max-width: 100%; height: auto; display: block; }
a    { color: inherit; text-decoration: none; }
ul   { list-style: none; }
button, input, select, textarea { font-family: inherit; }

/* â”€â”€ Lab Design Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  /* Core palette â€” deep scientific dark */
  --ink:         #04080A;
  --ink-2:       #0A1214;
  --ink-3:       #101B1E;
  --ink-4:       #172028;
  --surface:     #1A2730;
  --border:      rgba(56, 180, 140, 0.16);
  --border-h:    rgba(56, 180, 140, 0.42);

  /* Accent: bio-luminescent teal-green */
  --lab:         #38B48C;
  --lab-bright:  #4EEDB8;
  --lab-dim:     rgba(56, 180, 140, 0.18);
  --lab-glow:    0 0 28px rgba(56,180,140,0.22), 0 0 60px rgba(56,180,140,0.08);

  /* Gold â€” Shah Hayaat brand */
  --gold:        #C9960C;
  --gold-bright: #F0B929;
  --gold-dim:    rgba(201,150,12,0.16);

  /* Status colours */
  --red:         #E85555;
  --amber:       #F0A020;
  --green-ok:    #3EBA7C;

  /* Text */
  --text:        #D6EAE4;
  --text-mid:    rgba(214,234,228,0.62);
  --text-muted:  rgba(214,234,228,0.35);

  /* Typography */
  --font-head:   'Cormorant Garamond', Georgia, serif;
  --font-body:   'DM Sans', system-ui, sans-serif;
  --font-mono:   'JetBrains Mono', 'Courier New', monospace;

  /* Motion */
  --ease:        cubic-bezier(0.4, 0, 0.2, 1);
  --t:           0.3s;
  --radius:      16px;
  --radius-sm:   10px;
  --radius-xs:   6px;
}

/* â”€â”€ Page Shell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
html, body {
  min-height: 100%;
  background: var(--ink);
  color: var(--text);
  font-family: var(--font-body);
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

/* Subtle scan-line texture overlay */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(56,180,140,0.012) 2px,
      rgba(56,180,140,0.012) 4px
    );
}

/* â”€â”€ Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 0 1.5rem;
  position: relative; z-index: 1;
}
.lab-container--wide { max-width: 1100px; }

/* â”€â”€ Typography â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-h1 {
  font-family: var(--font-head);
  font-size: clamp(2.4rem, 6vw, 4rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.01em;
  color: var(--text);
}
.lab-h2 {
  font-family: var(--font-head);
  font-size: clamp(1.6rem, 4vw, 2.4rem);
  font-weight: 700;
  line-height: 1.2;
  color: var(--text);
}
.lab-h3 {
  font-family: var(--font-head);
  font-size: clamp(1.1rem, 2.5vw, 1.5rem);
  font-weight: 600;
  color: var(--text);
  line-height: 1.3;
}
.lab-p {
  font-size: clamp(0.9rem, 1.8vw, 1.02rem);
  color: var(--text-mid);
  line-height: 1.78;
}
.mono {
  font-family: var(--font-mono);
  letter-spacing: 0.02em;
}

/* â”€â”€ Tag/Badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-tag {
  display: inline-flex; align-items: center; gap: 0.4rem;
  font-family: var(--font-mono);
  font-size: 0.66rem; font-weight: 500;
  letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--lab);
  background: var(--lab-dim);
  border: 1px solid var(--border-h);
  border-radius: 50px;
  padding: 0.3rem 0.85rem;
}
.lab-tag--gold { color: var(--gold-bright); background: var(--gold-dim); border-color: rgba(201,150,12,0.3); }
.lab-tag--red  { color: var(--red); background: rgba(232,85,85,0.1); border-color: rgba(232,85,85,0.3); }

/* â”€â”€ Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-divider {
  width: 100%; height: 1px;
  background: linear-gradient(90deg, transparent, var(--border-h), transparent);
}

/* â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-card {
  background: var(--ink-3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: clamp(1.8rem, 4vw, 2.8rem);
  position: relative; overflow: hidden;
}
.lab-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--lab), transparent);
  opacity: 0.4;
}
.lab-card--glow {
  box-shadow: var(--lab-glow);
}

/* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
  font-family: var(--font-body); font-weight: 600; font-size: 0.9rem;
  padding: 0.82rem 2rem; border-radius: 50px;
  border: 2px solid transparent; cursor: pointer;
  transition: all var(--t) var(--ease);
  white-space: nowrap; position: relative; overflow: hidden;
}
.lab-btn::after {
  content: ''; position: absolute; inset: 0; border-radius: 50px;
  background: rgba(255,255,255,0); transition: background 0.2s;
}
.lab-btn:hover::after { background: rgba(255,255,255,0.06); }

.lab-btn--primary {
  background: linear-gradient(135deg, var(--lab), var(--lab-bright));
  color: var(--ink); box-shadow: 0 4px 20px rgba(56,180,140,0.32);
}
.lab-btn--primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 32px rgba(56,180,140,0.48);
}
.lab-btn--ghost {
  background: transparent;
  border-color: var(--border-h);
  color: var(--text-mid);
}
.lab-btn--ghost:hover { border-color: var(--lab); color: var(--text); }

.lab-btn--gold {
  background: linear-gradient(135deg, var(--gold), var(--gold-bright));
  color: var(--ink); box-shadow: 0 4px 20px rgba(201,150,12,0.32);
}
.lab-btn--gold:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 32px rgba(201,150,12,0.48);
}
.lab-btn--lg { padding: 1.05rem 2.5rem; font-size: 1rem; }
.lab-btn--sm { padding: 0.52rem 1.3rem; font-size: 0.82rem; }
.lab-btn--full { width: 100%; }
.lab-btn:disabled { opacity: 0.38; cursor: not-allowed; pointer-events: none; }

.lab-btn-row {
  display: flex; flex-wrap: wrap; gap: 0.85rem; align-items: center;
  margin-top: 2rem;
}

/* â”€â”€ Form Controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-field { margin-bottom: 1.25rem; }
.lab-label {
  display: block;
  font-family: var(--font-mono); font-size: 0.68rem; font-weight: 500;
  letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-muted); margin-bottom: 0.5rem;
}
.lab-input, .lab-select {
  width: 100%; padding: 0.78rem 1.1rem;
  background: var(--ink-4); border: 1.5px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text);
  font-family: var(--font-body); font-size: 0.97rem;
  outline: none; transition: border-color var(--t); -webkit-appearance: none;
}
.lab-input:focus, .lab-select:focus {
  border-color: var(--lab);
  box-shadow: 0 0 0 3px rgba(56,180,140,0.14);
}
.lab-select option { background: var(--ink-3); }

.lab-grid-2 {
  display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;
}
@media(max-width: 480px) { .lab-grid-2 { grid-template-columns: 1fr; } }

/* â”€â”€ Range Slider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-range {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 5px;
  background: var(--surface); border-radius: 3px; outline: none;
  border: 1px solid var(--border); cursor: pointer;
}
.lab-range::-webkit-slider-thumb {
  -webkit-appearance: none; width: 20px; height: 20px;
  background: linear-gradient(135deg, var(--lab), var(--lab-bright));
  border-radius: 50%; cursor: pointer;
  box-shadow: 0 0 10px rgba(56,180,140,0.5);
}
.lab-range-labels {
  display: flex; justify-content: space-between;
  font-family: var(--font-mono); font-size: 0.66rem;
  color: var(--text-muted); margin-top: 0.4rem;
}

/* â”€â”€ Progress Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-progress {
  margin-bottom: 2.5rem; position: relative; z-index: 1;
}
.lab-progress-meta {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 0.55rem;
}
.lab-progress-meta span {
  font-family: var(--font-mono); font-size: 0.68rem;
  color: var(--text-muted);
}
.lab-progress-meta .lab-progress-label { color: var(--lab); }
.lab-progress-track {
  height: 3px; background: var(--ink-4);
  border-radius: 2px; overflow: hidden;
  border: 1px solid var(--border);
}
.lab-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--lab), var(--lab-bright));
  border-radius: 2px;
  transition: width 0.7s var(--ease);
  position: relative;
}
.lab-progress-fill::after {
  content: '';
  position: absolute; right: 0; top: 50%; transform: translateY(-50%);
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--lab-bright);
  box-shadow: 0 0 10px var(--lab-bright);
}

/* â”€â”€ Score Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-score-row {
  display: flex; flex-wrap: wrap; gap: 0.75rem; margin: 1.25rem 0;
}
.lab-score-badge {
  background: var(--ink-4); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 0.65rem 1rem;
  min-width: 90px;
}
.lab-score-badge .val {
  font-family: var(--font-mono); font-size: 1.15rem; font-weight: 600;
  color: var(--lab); display: block; line-height: 1;
}
.lab-score-badge .lbl {
  font-family: var(--font-mono); font-size: 0.62rem;
  color: var(--text-muted); text-transform: uppercase;
  letter-spacing: 0.08em; margin-top: 0.22rem; display: block;
}

/* â”€â”€ Step Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-step-head { margin-bottom: 1.8rem; }
.lab-step-head .lab-tag { margin-bottom: 1rem; }
.lab-step-head h2 { margin-bottom: 0.55rem; }
.lab-step-head .lab-p { max-width: 580px; }

/* â”€â”€ Notification Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lab-notice {
  display: flex; align-items: flex-start; gap: 0.85rem;
  padding: 1rem 1.25rem;
  background: var(--ink-4); border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 0.87rem; line-height: 1.65;
}
.lab-notice .notice-icon { font-size: 1.1rem; flex-shrink: 0; margin-top: 0.1rem; }
.lab-notice strong { color: var(--text); font-weight: 600; }
.lab-notice p { color: var(--text-mid); margin: 0; }

/* â”€â”€ Animations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes lab-fade-up {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes lab-fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes lab-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%       { opacity: 0.6; transform: scale(0.97); }
}
@keyframes lab-glow-pulse {
  0%, 100% { box-shadow: 0 0 20px rgba(56,180,140,0.2); }
  50%       { box-shadow: 0 0 40px rgba(56,180,140,0.45); }
}
@keyframes lab-scan {
  0%   { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}
@keyframes lab-blink {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0; }
}
@keyframes lab-slide-in {
  from { opacity: 0; transform: translateX(-16px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes lab-pop {
  from { opacity: 0; transform: scale(0.94); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes disclaimer-pulse-red {
  0%, 100% { border-bottom-color: rgba(232,85,85,0.5); }
  50%       { border-bottom-color: rgba(232,85,85,1); }
}

.animate-fade-up { animation: lab-fade-up 0.5s var(--ease) both; }
.animate-fade-up.d1 { animation-delay: 0.1s; }
.animate-fade-up.d2 { animation-delay: 0.2s; }
.animate-fade-up.d3 { animation-delay: 0.3s; }
.animate-fade-up.d4 { animation-delay: 0.4s; }
.animate-pop { animation: lab-pop 0.42s var(--ease) both; }

/* ============================================================
   DISCLAIMER BANNER
   ============================================================ */
#labDisclaimer {
  position: fixed; top: 0; left: 0; right: 0; z-index: 9999;
  background: #050808;
  border-bottom: 2px solid rgba(232,85,85,0.6);
  animation: disclaimer-pulse-red 2.5s ease-in-out infinite;
}
.disclaimer-slides { height: 52px; position: relative; overflow: hidden; }

.disclaimer-slide {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  gap: 0.6rem; padding: 0 1.5rem;
  font-family: var(--font-mono);
  font-size: clamp(0.62rem, 1.6vw, 0.8rem);
  font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase;
  text-align: center;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 0.7s ease, transform 0.7s ease;
  pointer-events: none;
}
.disclaimer-slide.ds-active {
  opacity: 1; transform: translateY(0);
}
.disclaimer-slide.ds-0 { color: var(--red); }
.disclaimer-slide.ds-1 { color: var(--lab-bright); }
.disclaimer-slide.ds-2 { color: var(--gold-bright); }

.disclaimer-slide .ds-icon {
  font-size: 1rem; flex-shrink: 0;
}

.disclaimer-dots {
  display: flex; justify-content: center; align-items: center;
  gap: 5px; padding: 0 0 7px;
}
.disclaimer-dot {
  width: 5px; height: 5px; border-radius: 50%;
  background: rgba(255,255,255,0.15);
  transition: background 0.4s, transform 0.3s;
}
.disclaimer-dot.dd-active {
  background: var(--red); transform: scale(1.4);
}

/* ============================================================
   SITE HEADER
   ============================================================ */
#labHeader {
  position: sticky; top: 52px; z-index: 900;
  background: rgba(4,8,10,0.9);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border-bottom: 1px solid var(--border);
  padding: 0.9rem 0;
  transition: padding var(--t) var(--ease);
}
.lab-header-inner {
  max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;
  display: flex; align-items: center; justify-content: space-between; gap: 1rem;
}

/* Logo */
.lab-logo {
  display: flex; align-items: center; gap: 0.85rem;
  text-decoration: none; flex-shrink: 0;
}
.lab-logo-img {
  width: 40px; height: 40px; border-radius: 50%; object-fit: cover;
  border: 2px solid var(--lab); box-shadow: 0 0 12px rgba(56,180,140,0.35);
}
.lab-logo-text {
  font-family: var(--font-head); font-size: 1.1rem; font-weight: 700;
  color: var(--text); line-height: 1.1;
}
.lab-logo-text em { font-style: normal; color: var(--gold-bright); }
.lab-logo-sub {
  font-family: var(--font-mono); font-size: 0.6rem;
  color: var(--lab); letter-spacing: 0.12em; text-transform: uppercase;
  margin-top: 0.12rem;
}

/* Status indicator */
.lab-status-pill {
  display: flex; align-items: center; gap: 0.5rem;
  font-family: var(--font-mono); font-size: 0.66rem;
  color: var(--text-muted); letter-spacing: 0.06em;
  text-transform: uppercase;
}
.lab-status-dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--lab-bright);
  animation: lab-pulse 2s ease-in-out infinite;
  box-shadow: 0 0 6px var(--lab-bright);
}
.lab-status-dot.idle { background: var(--amber); box-shadow: 0 0 6px var(--amber); animation: none; }

/* Back button */
.lab-nav-btn {
  display: flex; align-items: center; gap: 0.4rem;
  font-family: var(--font-body); font-size: 0.82rem; font-weight: 500;
  color: var(--text-muted); background: none;
  border: 1px solid var(--border);
  border-radius: 50px; padding: 0.45rem 1.1rem;
  cursor: pointer; transition: all 0.22s; text-decoration: none;
}
.lab-nav-btn:hover { color: var(--text); border-color: var(--lab); }

/* ============================================================
   WELCOME â€” HERO SECTION
   ============================================================ */
#labWelcome { position: relative; z-index: 1; }

.lab-hero {
  padding: clamp(4rem, 10vw, 7rem) 0 clamp(3rem, 7vw, 5rem);
  position: relative; overflow: hidden;
}

/* Radial gradient background glow */
.lab-hero::before {
  content: '';
  position: absolute;
  top: -60px; left: 50%; transform: translateX(-50%);
  width: 800px; height: 500px;
  background: radial-gradient(ellipse, rgba(56,180,140,0.07) 0%, transparent 70%);
  pointer-events: none;
}

/* Animated corner brackets */
.lab-hero::after {
  content: '';
  position: absolute; top: 2rem; right: 2rem;
  width: 60px; height: 60px;
  border-top: 2px solid var(--lab);
  border-right: 2px solid var(--lab);
  opacity: 0.3;
}

.lab-hero-inner {
  position: relative; z-index: 1;
}

.lab-hero-eyebrow {
  display: flex; align-items: center; gap: 0.75rem;
  margin-bottom: 1.8rem;
  animation: lab-fade-up 0.6s var(--ease) both;
}

.lab-hero-title {
  font-family: var(--font-head);
  font-size: clamp(2.8rem, 7vw, 5.2rem);
  font-weight: 700; line-height: 1.05;
  letter-spacing: -0.02em; margin-bottom: 1.4rem;
  animation: lab-fade-up 0.6s var(--ease) 0.1s both;
}
.lab-hero-title .accent { color: var(--lab); display: block; }
.lab-hero-title .accent-gold { color: var(--gold-bright); }

.lab-hero-desc {
  font-size: clamp(0.95rem, 2vw, 1.1rem);
  color: var(--text-mid); line-height: 1.78;
  max-width: 560px; margin-bottom: 2.5rem;
  animation: lab-fade-up 0.6s var(--ease) 0.2s both;
}

.lab-hero-btns {
  animation: lab-fade-up 0.6s var(--ease) 0.3s both;
}

/* Module pills strip */
.lab-modules-strip {
  padding: 2.5rem 0;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  overflow: hidden;
  animation: lab-fade-up 0.6s var(--ease) 0.4s both;
}
.lab-modules-strip-label {
  font-family: var(--font-mono); font-size: 0.62rem;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.12em;
  margin-bottom: 1rem;
}
.lab-pills {
  display: flex; flex-wrap: wrap; gap: 0.5rem;
}
.lab-pill {
  display: inline-flex; align-items: center; gap: 0.35rem;
  padding: 0.32rem 0.85rem;
  background: var(--ink-3); border: 1px solid var(--border);
  border-radius: 50px;
  font-family: var(--font-mono); font-size: 0.68rem;
  color: var(--text-muted); white-space: nowrap;
  transition: all 0.2s;
}
.lab-pill:hover { border-color: var(--lab); color: var(--lab); }
.lab-pill .pill-icon { font-size: 0.85rem; }

/* Stat row */
.lab-stats-row {
  display: flex; flex-wrap: wrap; gap: 1rem;
  padding: 2.5rem 0;
  animation: lab-fade-up 0.6s var(--ease) 0.5s both;
}
.lab-stat-item {
  flex: 1; min-width: 110px;
  background: var(--ink-3); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 1.2rem;
  text-align: center;
}
.lab-stat-num {
  font-family: var(--font-mono); font-size: 2rem; font-weight: 600;
  color: var(--lab); line-height: 1; display: block; margin-bottom: 0.3rem;
}
.lab-stat-lbl {
  font-family: var(--font-mono); font-size: 0.62rem;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em;
}

/* ============================================================
   INSTRUCTIONS CARD
   ============================================================ */
#labInstructions {
  padding-bottom: clamp(3rem, 6vw, 5rem);
  position: relative; z-index: 1;
}

.instructions-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 1rem; margin-bottom: 2rem;
}
@media(max-width: 600px) { .instructions-grid { grid-template-columns: 1fr; } }

.instruction-item {
  display: flex; align-items: flex-start; gap: 1rem;
  padding: 1.15rem;
  background: var(--ink-4); border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  transition: border-color var(--t);
}
.instruction-item:hover { border-color: var(--lab); }
.instruction-item .i-icon {
  width: 38px; height: 38px; border-radius: 50%; flex-shrink: 0;
  background: var(--lab-dim); border: 1px solid var(--border-h);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem;
}
.instruction-item .i-body strong {
  display: block; font-size: 0.88rem; font-weight: 600;
  color: var(--text); margin-bottom: 0.2rem;
}
.instruction-item .i-body p {
  font-size: 0.8rem; color: var(--text-mid); line-height: 1.55; margin: 0;
}

/* ============================================================
   GENDER SELECTION
   ============================================================ */
#labGender { display: none; position: relative; z-index: 1; }

.gender-select-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 1rem; max-width: 420px;
}
@media(max-width: 480px) { .gender-select-grid { grid-template-columns: 1fr; } }

.gender-card {
  background: var(--ink-4); border: 2px solid var(--border);
  border-radius: var(--radius); padding: 2rem 1.5rem;
  text-align: center; cursor: pointer;
  transition: all var(--t) var(--ease);
  position: relative; overflow: hidden;
}
.gender-card::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(56,180,140,0), rgba(56,180,140,0.06));
  opacity: 0; transition: opacity var(--t);
}
.gender-card:hover { border-color: var(--border-h); transform: translateY(-4px); }
.gender-card:hover::before { opacity: 1; }
.gender-card.selected {
  border-color: var(--lab);
  box-shadow: 0 0 0 3px rgba(56,180,140,0.15), var(--lab-glow);
  animation: lab-glow-pulse 2s ease-in-out infinite;
}
.gender-card.selected::before { opacity: 1; }

.gender-icon { font-size: 2.8rem; margin-bottom: 0.85rem; display: block; }
.gender-title {
  font-family: var(--font-head); font-size: 1.1rem; font-weight: 700;
  color: var(--text); margin-bottom: 0.3rem;
}
.gender-note {
  font-family: var(--font-mono); font-size: 0.62rem;
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.08em;
}
.gender-card.selected .gender-title { color: var(--lab-bright); }
.gender-card.selected .gender-note { color: var(--lab); }

/* Selected checkmark */
.gender-check {
  position: absolute; top: 0.75rem; right: 0.75rem;
  width: 22px; height: 22px; border-radius: 50%;
  background: var(--lab); border: 2px solid var(--lab);
  display: none; align-items: center; justify-content: center;
  font-size: 0.7rem; color: var(--ink); font-weight: 700;
}
.gender-card.selected .gender-check { display: flex; }

/* Female note */
.female-modules-note {
  margin-top: 1.5rem; padding: 1rem 1.25rem;
  background: var(--gold-dim); border: 1px solid rgba(201,150,12,0.25);
  border-radius: var(--radius-sm);
  display: none; align-items: flex-start; gap: 0.7rem;
}
.female-modules-note.show { display: flex; }
.female-modules-note p {
  font-size: 0.82rem; color: rgba(240,185,41,0.85); line-height: 1.6; margin: 0;
}

/* ============================================================
   PLACEHOLDER â€” Module View
   (Will be filled in by Parts 2, 3, 4)
   ============================================================ */
#labModules {
  display: none;
  min-height: 60vh;
  position: relative; z-index: 1;
  padding: clamp(2rem, 5vw, 4rem) 0;
}

/* Generic module step card wrapper */
.lab-module-wrap {
  animation: lab-fade-up 0.42s var(--ease) both;
}

/* ============================================================
   FOOTER STRIP
   ============================================================ */
.lab-footer-strip {
  border-top: 1px solid var(--border);
  padding: 1.5rem 0;
  text-align: center;
  position: relative; z-index: 1;
}
.lab-footer-strip p {
  font-family: var(--font-mono); font-size: 0.64rem;
  color: var(--text-muted); letter-spacing: 0.06em;
  line-height: 1.7;
}
.lab-footer-strip a { color: var(--lab); }

/* ============================================================
   SCROLL-BASED HEADER SHRINK
   ============================================================ */
body.lab-scrolled #labHeader { padding: 0.55rem 0; }

/* ============================================================
   RESPONSIVE OVERRIDES
   ============================================================ */
@media(max-width: 640px) {
  .lab-hero-title { letter-spacing: -0.01em; }
  .lab-btn--lg { padding: 0.9rem 1.8rem; width: 100%; max-width: 320px; }
  .lab-stats-row { gap: 0.75rem; }
  .lab-stat-num { font-size: 1.6rem; }
}

/* ============================================================
   ACCESSIBILITY
   ============================================================ */
:focus-visible {
  outline: 2px solid var(--lab);
  outline-offset: 3px;
  border-radius: 4px;
}
.sr-only {
  position: absolute; width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

  </style>
</head>
<body>

<!-- ============================================================
     DISCLAIMER BANNER (Fixed, always visible)
     ============================================================ -->
<div id="labDisclaimer" role="complementary" aria-label="Important disclaimers">
  <div class="disclaimer-slides">

    <div class="disclaimer-slide ds-0 ds-active" id="ds-0" aria-live="polite">
      <span class="ds-icon">âš </span>
      THIS PLATFORM PROVIDES WELLNESS INDICATORS ONLY &mdash; NOT A MEDICAL DIAGNOSTIC TOOL
    </div>

    <div class="disclaimer-slide ds-1" id="ds-1">
      <span class="ds-icon">ğŸ”</span>
      WE DO NOT STORE, SAVE OR TRANSMIT ANY PERSONAL DATA &mdash; ALL CALCULATIONS RUN LOCALLY IN YOUR BROWSER
    </div>

    <div class="disclaimer-slide ds-2" id="ds-2">
      <span class="ds-icon">ğŸ©º</span>
      FOR ANY MEDICAL CONCERNS, ALWAYS CONSULT A QUALIFIED HEALTHCARE PROFESSIONAL
    </div>

  </div>
  <div class="disclaimer-dots" aria-hidden="true">
    <div class="disclaimer-dot dd-active" id="dd-0"></div>
    <div class="disclaimer-dot" id="dd-1"></div>
    <div class="disclaimer-dot" id="dd-2"></div>
  </div>
</div>

<!-- Top padding for fixed disclaimer -->
<div style="height:52px" aria-hidden="true"></div>


<!-- ============================================================
     SITE HEADER
     ============================================================ -->
<header id="labHeader" role="banner">
  <div class="lab-header-inner">

    <!-- Logo -->
    <a href="index.html" class="lab-logo" aria-label="Shah Hayaat â€” back to main site">
      <img src="https://raw.githubusercontent.com/yasirhashmi02-dev/Shahhayaat02/main/logo.jpg"
           alt="Shah Hayaat" class="lab-logo-img" loading="eager">
      <div>
        <div class="lab-logo-text">Shah <em>Hayaat</em></div>
        <div class="lab-logo-sub">Digital Wellness Lab</div>
      </div>
    </a>

    <!-- Centre status -->
    <div class="lab-status-pill" id="headerStatus" aria-live="polite">
      <div class="lab-status-dot idle" id="headerDot"></div>
      <span id="headerStatusText">Ready</span>
    </div>

    <!-- Back link -->
    <a href="index.html" class="lab-nav-btn" aria-label="Return to Shah Hayaat website">
      â† Back to Site
    </a>

  </div>
</header>


<!-- ============================================================
     WELCOME SCREEN
     ============================================================ -->
<section id="labWelcome" role="main" aria-labelledby="welcomeTitle">

  <!-- Hero -->
  <div class="lab-hero">
    <div class="lab-container">
      <div class="lab-hero-inner">

        <div class="lab-hero-eyebrow">
          <div class="lab-tag">ğŸ§ª 18 Wellness Modules</div>
          <div class="lab-tag lab-tag--gold">âš¡ Browser-Only Â· Zero Data</div>
        </div>

        <h1 class="lab-hero-title" id="welcomeTitle">
          Digital Wellness
          <span class="accent">Intelligence Lab</span>
        </h1>

        <p class="lab-hero-desc">
          An advanced browser-based wellness assessment platform.
          18 activity modules measuring cognitive performance, respiratory
          health, stress resilience, motor stability and lifestyle patterns â€”
          all computed locally on your device. Nothing stored. Nothing transmitted.
        </p>

        <div class="lab-hero-btns lab-btn-row" style="margin-top:0">
          <button class="lab-btn lab-btn--primary lab-btn--lg"
                  onclick="LAB.showInstructions()"
                  aria-label="Begin assessment">
            Begin Assessment â†’
          </button>
          <a href="#labModuleList" class="lab-btn lab-btn--ghost">
            View All Modules
          </a>
        </div>

      </div>
    </div>
  </div>

  <!-- Stats -->
  <div class="lab-container">
    <div class="lab-stats-row" role="list" aria-label="Assessment statistics">
      <div class="lab-stat-item" role="listitem">
        <span class="lab-stat-num">18</span>
        <span class="lab-stat-lbl">Modules</span>
      </div>
      <div class="lab-stat-item" role="listitem">
        <span class="lab-stat-num">~15</span>
        <span class="lab-stat-lbl">Minutes</span>
      </div>
      <div class="lab-stat-item" role="listitem">
        <span class="lab-stat-num">6</span>
        <span class="lab-stat-lbl">Health Scores</span>
      </div>
      <div class="lab-stat-item" role="listitem">
        <span class="lab-stat-num">0</span>
        <span class="lab-stat-lbl">Data Stored</span>
      </div>
      <div class="lab-stat-item" role="listitem">
        <span class="lab-stat-num">100%</span>
        <span class="lab-stat-lbl">Private</span>
      </div>
    </div>
  </div>

  <!-- Module list -->
  <div class="lab-container" style="padding-bottom:3rem" id="labModuleList">
    <div class="lab-modules-strip">
      <p class="lab-modules-strip-label">Assessment modules included</p>
      <div class="lab-pills" role="list" aria-label="Module list">
        <div class="lab-pill" role="listitem"><span class="pill-icon">âš¡</span> Reaction Speed</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ“‰</span> Fatigue Drift</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ§©</span> Working Memory</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ‘</span> Attention Focus</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸŒ¬</span> Breath Sync</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">â±</span> COâ‚‚ Tolerance</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">â™»ï¸</span> Recovery</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ”¥</span> Cognition Under Pressure</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ”·</span> Pattern Overload</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ“±</span> Stability Hold</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">âœ‹</span> Micro Tremor</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">ğŸ’¤</span> Sleep Efficiency</div>
        <div class="lab-pill" role="listitem"><span class="pill-icon">âš–ï¸</span> Lifestyle Load</div>
        <div class="lab-pill lab-pill--female" role="listitem" style="border-color:rgba(201,150,12,0.3);color:rgba(240,185,41,0.7)"><span class="pill-icon">ğŸŒ¸</span> Hormonal Rhythm</div>
        <div class="lab-pill lab-pill--female" role="listitem" style="border-color:rgba(201,150,12,0.3);color:rgba(240,185,41,0.7)"><span class="pill-icon">âš¡</span> Energy &amp; Iron</div>
        <div class="lab-pill lab-pill--female" role="listitem" style="border-color:rgba(201,150,12,0.3);color:rgba(240,185,41,0.7)"><span class="pill-icon">âœ¨</span> Hormonal Skin</div>
        <div class="lab-pill lab-pill--female" role="listitem" style="border-color:rgba(201,150,12,0.3);color:rgba(240,185,41,0.7)"><span class="pill-icon">ğŸŒ™</span> Sleep-Cycle</div>
        <div class="lab-pill lab-pill--female" role="listitem" style="border-color:rgba(201,150,12,0.3);color:rgba(240,185,41,0.7)"><span class="pill-icon">ğŸŒ¸</span> Pelvic Comfort</div>
        <span style="font-family:var(--font-mono);font-size:0.62rem;color:var(--text-muted);align-self:center;padding:0 0.4rem">
          &nbsp; ğŸŒ¸ = Female-specific
        </span>
      </div>
    </div>
  </div>

</section>


<!-- ============================================================
     INSTRUCTIONS CARD
     ============================================================ -->
<section id="labInstructions" style="display:none" role="region" aria-labelledby="instrTitle">
  <div class="lab-container" style="padding: clamp(2.5rem,6vw,4.5rem) 1.5rem">

    <div class="lab-card lab-card--glow animate-pop">

      <div class="lab-step-head">
        <div class="lab-tag">ğŸ“‹ Before You Begin</div>
        <h2 class="lab-h2" id="instrTitle" style="margin-top:1rem;margin-bottom:0.6rem">
          What to Expect
        </h2>
        <p class="lab-p">
          Read these notes once â€” they'll help you get the most accurate results
          and understand what each module is measuring.
        </p>
      </div>

      <div class="instructions-grid">

        <div class="instruction-item animate-fade-up d1">
          <div class="i-icon">ğŸ”</div>
          <div class="i-body">
            <strong>Zero Data Storage</strong>
            <p>No information leaves your device. No server calls, no cookies, no tracking. Everything runs in browser memory only.</p>
          </div>
        </div>

        <div class="instruction-item animate-fade-up d2">
          <div class="i-icon">ğŸ“±</div>
          <div class="i-body">
            <strong>Mobile Recommended</strong>
            <p>The motor stability module uses your device's motion sensor. For best results, use a smartphone.</p>
          </div>
        </div>

        <div class="instruction-item animate-fade-up d2">
          <div class="i-icon">âš•ï¸</div>
          <div class="i-body">
            <strong>Wellness Indicators Only</strong>
            <p>Results are not medical diagnoses. They are activity-based wellness indicators. Consult a doctor for medical concerns.</p>
          </div>
        </div>

        <div class="instruction-item animate-fade-up d3">
          <div class="i-icon">ğŸ¯</div>
          <div class="i-body">
            <strong>Be Honest &amp; Relaxed</strong>
            <p>For activity tests, find a quiet spot and focus. For questionnaires, answer based on your genuine average â€” not your best day.</p>
          </div>
        </div>

        <div class="instruction-item animate-fade-up d3">
          <div class="i-icon">â±</div>
          <div class="i-body">
            <strong>~15 Minutes Total</strong>
            <p>The complete assessment takes 12â€“18 minutes. You can see your full report at the end with a downloadable PDF.</p>
          </div>
        </div>

        <div class="instruction-item animate-fade-up d4">
          <div class="i-icon">ğŸ“„</div>
          <div class="i-body">
            <strong>Downloadable Report</strong>
            <p>A professional PDF report is generated locally at the end â€” Shah Hayaat branding, scores, wellness tips and product suggestions.</p>
          </div>
        </div>

      </div>

      <!-- Legal notice -->
      <div class="lab-notice" style="margin-bottom:2rem" role="note">
        <div class="notice-icon">âš–ï¸</div>
        <p>
          <strong>Legal &amp; Ethical Note: </strong>
          This platform does not diagnose medical conditions, does not make disease claims and does not store or transmit personal health data.
          It is a wellness indicator tool only. All calculations are performed exclusively within your browser session.
          Results are deleted when you close or refresh the page.
        </p>
      </div>

      <div class="lab-btn-row">
        <button class="lab-btn lab-btn--primary lab-btn--lg"
                onclick="LAB.showGender()"
                aria-label="Proceed to gender selection">
          I Understand â€” Continue â†’
        </button>
        <button class="lab-btn lab-btn--ghost"
                onclick="LAB.showWelcome()"
                aria-label="Go back to welcome screen">
          â† Back
        </button>
      </div>

    </div>
  </div>
</section>


<!-- ============================================================
     GENDER SELECTION
     ============================================================ -->
<section id="labGender" role="region" aria-labelledby="genderTitle">
  <div class="lab-container" style="padding: clamp(2.5rem,6vw,4.5rem) 1.5rem">

    <div class="lab-card lab-card--glow animate-pop">

      <div class="lab-step-head">
        <div class="lab-tag">ğŸ‘¤ Setup</div>
        <h2 class="lab-h2" id="genderTitle" style="margin-top:1rem;margin-bottom:0.6rem">
          Biological Sex
        </h2>
        <p class="lab-p">
          Your selection activates the relevant assessment modules.
          The female option adds 5 additional hormonal wellness modules (modules 14â€“18).
          This is used <em>only</em> to personalise your assessment
          â€” it is never stored or transmitted.
        </p>
      </div>

      <div class="gender-select-grid" role="group" aria-label="Select biological sex">

        <div class="gender-card"
             id="genderMale"
             role="radio" aria-checked="false" tabindex="0"
             onclick="LAB.selectGender('male')"
             onkeydown="if(event.key==='Enter'||event.key===' ') LAB.selectGender('male')">
          <div class="gender-check" aria-hidden="true">âœ“</div>
          <span class="gender-icon">â™‚</span>
          <div class="gender-title">Male</div>
          <div class="gender-note">13 core modules</div>
        </div>

        <div class="gender-card"
             id="genderFemale"
             role="radio" aria-checked="false" tabindex="0"
             onclick="LAB.selectGender('female')"
             onkeydown="if(event.key==='Enter'||event.key===' ') LAB.selectGender('female')">
          <div class="gender-check" aria-hidden="true">âœ“</div>
          <span class="gender-icon">â™€</span>
          <div class="gender-title">Female</div>
          <div class="gender-note">13 + 5 female modules</div>
        </div>

      </div>

      <!-- Female extra info -->
      <div class="female-modules-note" id="femaleNote" role="note">
        <span style="font-size:1.1rem;flex-shrink:0">ğŸŒ¸</span>
        <p>
          <strong style="color:var(--gold-bright)">5 Additional Female Modules Activated: </strong>
          Hormonal Rhythm, Energy &amp; Iron, Hormonal Skin Impact, Sleep-Cycle Disruption
          and Pelvic Comfort Indicator. All responses remain private and local.
        </p>
      </div>

      <div class="lab-btn-row">
        <button class="lab-btn lab-btn--primary lab-btn--lg"
                id="genderContinueBtn"
                onclick="LAB.startModules()"
                disabled
                aria-label="Start assessment">
          Start Assessment â†’
        </button>
        <button class="lab-btn lab-btn--ghost"
                onclick="LAB.showInstructions()"
                aria-label="Back to instructions">
          â† Back
        </button>
      </div>

    </div>
  </div>
</section>


<!-- ============================================================
     MODULE AREA
     (Parts 2, 3, 4 will inject module HTML here)
     ============================================================ -->
<section id="labModules" role="region" aria-label="Assessment modules">
  <div class="lab-container">

    <!-- Progress bar (shown during assessment) -->
    <div class="lab-progress" id="labProgressBar" style="display:none" role="status" aria-label="Assessment progress">
      <div class="lab-progress-meta">
        <span id="progressStep" class="mono">MODULE 0 / 0</span>
        <span id="progressLabel" class="lab-progress-label mono">â€”</span>
      </div>
      <div class="lab-progress-track">
        <div class="lab-progress-fill" id="progressFill" style="width:0%"></div>
      </div>
    </div>

    <!-- Module content injected here by Parts 2-4 -->
    <div id="moduleContent" aria-live="polite"></div>

  </div>
</section>


<!-- ============================================================
     FOOTER STRIP
     ============================================================ -->
<footer class="lab-footer-strip" role="contentinfo">
  <p>
    Shah Hayaat Digital Wellness Intelligence Lab &nbsp;|&nbsp;
    All calculations are performed locally in your browser. Zero data stored or transmitted. &nbsp;|&nbsp;
    <a href="disclaimer.html" target="_blank" rel="noopener">Medical Disclaimer</a> &nbsp;Â·&nbsp;
    <a href="privacy.html" target="_blank" rel="noopener">Privacy Policy</a> &nbsp;Â·&nbsp;
    <a href="index.html">â† Main Site</a>
  </p>
</footer>


<!-- ============================================================
     JAVASCRIPT â€” PART 1: Foundation + Navigation Engine
     ============================================================ -->
<script>
'use strict';

/* â”€â”€ Global State Object â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const LAB = {

  /* â”€â”€ State â”€â”€ */
  gender:       null,
  moduleIndex:  0,
  moduleQueue:  [],
  scores: {
    cognitive:   null,
    respiratory: null,
    stress:      null,
    stability:   null,
    lifestyle:   null,
    hormonal:    null,   // female only
  },
  raw: {},   // raw sub-scores and measurements

  /* â”€â”€ Constants â”€â”€ */
  GH: 'https://raw.githubusercontent.com/yasirhashmi02-dev/Shahhayaat02/main/',

  /* â”€â”€ DOM helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  el(id)        { return document.getElementById(id); },
  qs(sel, ctx)  { return (ctx||document).querySelector(sel); },
  qsa(sel, ctx) { return [...(ctx||document).querySelectorAll(sel)]; },

  /* â”€â”€ Section visibility â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  _sections: ['labWelcome','labInstructions','labGender','labModules'],

  showOnly(id) {
    this._sections.forEach(s => {
      const el = this.el(s);
      if (!el) return;
      el.style.display = (s === id) ? 'block' : 'none';
    });
    // Smooth scroll to header
    this.el('labHeader')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
  },

  /* â”€â”€ Navigation flows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  showWelcome() {
    this.showOnly('labWelcome');
    this.setStatus('idle', 'Ready');
    this.el('labProgressBar').style.display = 'none';
  },

  showInstructions() {
    this.showOnly('labInstructions');
    this.setStatus('idle', 'Setup');
  },

  showGender() {
    this.showOnly('labGender');
    this.setStatus('idle', 'Setup');
  },

  /* â”€â”€ Gender selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  selectGender(g) {
    this.gender = g;

    // Visual update
    ['male','female'].forEach(x => {
      const card = this.el('gender'+x.charAt(0).toUpperCase()+x.slice(1));
      if (!card) return;
      const isSelected = x === g;
      card.classList.toggle('selected', isSelected);
      card.setAttribute('aria-checked', String(isSelected));
    });

    // Show female note
    const note = this.el('femaleNote');
    if (note) note.classList.toggle('show', g === 'female');

    // Enable continue button
    const btn = this.el('genderContinueBtn');
    if (btn) btn.disabled = false;
  },

  /* â”€â”€ Module Queue Setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  startModules() {
    if (!this.gender) return;

    // Core 13 modules â€” functions registered in Parts 2 & 3
    this.moduleQueue = [
      'mod_reactionSpeed',       // Part 2 â€” Cognitive
      'mod_reactionFatigue',     // Part 2 â€” Cognitive
      'mod_workingMemory',       // Part 2 â€” Cognitive
      'mod_sustainedAttention',  // Part 2 â€” Cognitive
      'mod_breathSync',          // Part 3 â€” Respiratory
      'mod_co2Tolerance',        // Part 3 â€” Respiratory
      'mod_recovery',            // Part 3 â€” Respiratory
      'mod_cognitiveUnderPressure', // Part 3 â€” Stress
      'mod_patternOverload',     // Part 3 â€” Stress
      'mod_stabilityHold',       // Part 3 â€” Motor
      'mod_microTremor',         // Part 3 â€” Motor
      'mod_sleepEfficiency',     // Part 3 â€” Lifestyle
      'mod_lifestyleLoad',       // Part 3 â€” Lifestyle
    ];

    // Add female modules if selected
    if (this.gender === 'female') {
      this.moduleQueue.push(
        'mod_hormonalRhythm',    // Part 4 â€” Female
        'mod_energyIron',        // Part 4 â€” Female
        'mod_hormonalSkin',      // Part 4 â€” Female
        'mod_sleepCycle',        // Part 4 â€” Female
        'mod_pelvicComfort'      // Part 4 â€” Female
      );
    }

    this.moduleIndex = 0;
    this.showOnly('labModules');
    this.el('labProgressBar').style.display = 'block';
    this.nextModule();
  },

  /* â”€â”€ Module runner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  nextModule() {
    if (this.moduleIndex >= this.moduleQueue.length) {
      // All done â€” show dashboard (Part 4 registers this)
      if (typeof LAB.showDashboard === 'function') {
        LAB.showDashboard();
      } else {
        // Fallback placeholder until Part 4 is added
        this.el('moduleContent').innerHTML = `
          <div class="lab-card" style="text-align:center;padding:4rem 2rem">
            <div style="font-size:3rem;margin-bottom:1rem">âœ…</div>
            <h2 class="lab-h2" style="margin-bottom:0.75rem">Assessment Complete</h2>
            <p class="lab-p" style="margin:0 auto;max-width:420px;margin-bottom:2rem">
              All modules finished. Dashboard and PDF report coming in Part 4.
            </p>
            <button class="lab-btn lab-btn--primary" onclick="LAB.showWelcome()">
              â†º Restart
            </button>
          </div>`;
      }
      return;
    }

    const modName = this.moduleQueue[this.moduleIndex];
    this.updateProgress();

    // Look up the module function
    const fn = window[modName] || this[modName];
    if (typeof fn === 'function') {
      fn.call(this);
    } else {
      // Module not yet implemented (Parts 2/3/4 not loaded)
      this._placeholderModule(modName);
    }
  },

  _placeholderModule(name) {
    // Temp placeholder shown when Part 2/3/4 not added yet
    const label = name
      .replace('mod_','')
      .replace(/([A-Z])/g, ' $1')
      .replace(/^./, s => s.toUpperCase());

    this.el('moduleContent').innerHTML = `
      <div class="lab-card lab-card--glow lab-module-wrap">
        <div class="lab-step-head">
          <div class="lab-tag">ğŸ”§ Coming in Part ${this._getModulePart(name)}</div>
          <h2 class="lab-h2" style="margin-top:1rem;margin-bottom:0.6rem">${label}</h2>
          <p class="lab-p">This module will be implemented in the next part of the build.</p>
        </div>
        <div class="lab-notice" style="margin-bottom:2rem">
          <div class="notice-icon">â„¹ï¸</div>
          <p>Module <strong>${name}</strong> is queued. The full implementation arrives in Part ${this._getModulePart(name)} of this project.</p>
        </div>
        <div class="lab-btn-row">
          <button class="lab-btn lab-btn--primary" onclick="LAB.skipModule()">
            Skip (Test Navigation) â†’
          </button>
        </div>
      </div>`;
  },

  _getModulePart(name) {
    const p2 = ['mod_reactionSpeed','mod_reactionFatigue','mod_workingMemory','mod_sustainedAttention'];
    const p3 = ['mod_breathSync','mod_co2Tolerance','mod_recovery','mod_cognitiveUnderPressure','mod_patternOverload','mod_stabilityHold','mod_microTremor','mod_sleepEfficiency','mod_lifestyleLoad'];
    if (p2.includes(name)) return 2;
    if (p3.includes(name)) return 3;
    return 4;
  },

  skipModule() {
    // Dev helper: skip placeholder to test navigation
    this.moduleIndex++;
    this.nextModule();
  },

  /* â”€â”€ Progress bar update â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  updateProgress() {
    const total  = this.moduleQueue.length;
    const current = this.moduleIndex + 1;
    const pct    = Math.round(((current-1) / total) * 100);

    const labels = {
      mod_reactionSpeed:          'ğŸ§  Reaction Speed',
      mod_reactionFatigue:        'ğŸ§  Fatigue Drift',
      mod_workingMemory:          'ğŸ§© Working Memory',
      mod_sustainedAttention:     'ğŸ‘ Attention Focus',
      mod_breathSync:             'ğŸŒ¬ Breath Sync',
      mod_co2Tolerance:           'â± COâ‚‚ Tolerance',
      mod_recovery:               'â™»ï¸ Recovery',
      mod_cognitiveUnderPressure: 'ğŸ”¥ Cognition Under Pressure',
      mod_patternOverload:        'ğŸ”· Pattern Overload',
      mod_stabilityHold:          'ğŸ“± Stability Hold',
      mod_microTremor:            'âœ‹ Micro Tremor',
      mod_sleepEfficiency:        'ğŸ’¤ Sleep Efficiency',
      mod_lifestyleLoad:          'âš–ï¸ Lifestyle Load',
      mod_hormonalRhythm:         'ğŸŒ¸ Hormonal Rhythm',
      mod_energyIron:             'âš¡ Energy & Iron',
      mod_hormonalSkin:           'âœ¨ Hormonal Skin',
      mod_sleepCycle:             'ğŸŒ™ Sleep-Cycle',
      mod_pelvicComfort:          'ğŸŒ¸ Pelvic Comfort',
    };

    const modName = this.moduleQueue[this.moduleIndex] || '';
    const label   = labels[modName] || modName;

    const stepEl  = this.el('progressStep');
    const labelEl = this.el('progressLabel');
    const fillEl  = this.el('progressFill');

    if (stepEl)  stepEl.textContent  = `MODULE ${current} / ${total}`;
    if (labelEl) labelEl.textContent = label;
    if (fillEl)  fillEl.style.width  = pct + '%';

    // Header status
    this.setStatus('active', label);
  },

  /* â”€â”€ Header status helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  setStatus(state, text) {
    const dot  = this.el('headerDot');
    const span = this.el('headerStatusText');
    if (dot)  dot.className  = 'lab-status-dot' + (state === 'active' ? '' : ' idle');
    if (span) span.textContent = text;
  },

  /* â”€â”€ Score utilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  avg(arr)  { return arr.length ? arr.reduce((a,b) => a+b, 0) / arr.length : 0; },
  clamp(v,min,max) { return Math.max(min, Math.min(max, v)); },
  stdev(arr) {
    const m = this.avg(arr);
    return Math.sqrt(this.avg(arr.map(x => (x - m) ** 2)));
  },

  scoreColor(s) {
    if (s >= 80) return '#3EBA7C';
    if (s >= 55) return '#F0A020';
    return '#E85555';
  },
  scoreLabel(s) {
    if (s >= 80) return 'Excellent';
    if (s >= 65) return 'Good';
    if (s >= 50) return 'Moderate';
    if (s >= 35) return 'Needs Attention';
    return 'Low';
  },

  /* â”€â”€ Render module content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  renderModule(html) {
    const el = this.el('moduleContent');
    if (el) {
      el.innerHTML = html;
      el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  },

  /* â”€â”€ Progress helper (for modules to call) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  progressHTML() {
    // Returns empty string â€” progress is in the fixed bar above
    return '';
  },

};

/* â”€â”€ Window event helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
// Scroll-based header shrink
window.addEventListener('scroll', () => {
  document.body.classList.toggle('lab-scrolled', window.scrollY > 40);
}, { passive: true });


/* â”€â”€ Disclaimer Banner Rotator â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initDisclaimer() {
  const TOTAL = 3;
  let current = 0;

  setInterval(() => {
    // Deactivate current
    const prevSlide = document.getElementById('ds-' + current);
    const prevDot   = document.getElementById('dd-' + current);
    if (prevSlide) prevSlide.classList.remove('ds-active');
    if (prevDot)   prevDot.classList.remove('dd-active');

    current = (current + 1) % TOTAL;

    // Activate next
    const nextSlide = document.getElementById('ds-' + current);
    const nextDot   = document.getElementById('dd-' + current);
    if (nextSlide) nextSlide.classList.add('ds-active');
    if (nextDot)   nextDot.classList.add('dd-active');

    // Dot 0 colour matches current slide colour
    const dot0 = document.getElementById('dd-0');
    const colours = ['var(--red)', 'var(--lab-bright)', 'var(--gold-bright)'];
    document.querySelectorAll('.disclaimer-dot').forEach((d,i) => {
      d.style.background = '';
    });
    if (nextDot) nextDot.style.background = colours[current];

  }, 5000);
})();


/* â”€â”€ Expose LAB globally â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
window.LAB = LAB;

// Auto-hide footer lab-page padding
document.documentElement.style.setProperty('--disclaimer-h', '52px');
</script>

</body>
</html>
